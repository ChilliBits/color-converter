language: android
jdk: oraclejdk8

android:
  components:
    - build-tools-29.0.3
    - android-29
    - extra-android-support
    - extra-google-m2repository
    - extra-android-m2repository
    - extra-google-google_play_services
  licenses:
    - '.+'

before_install:
  - chmod +x gradlew

before_script:
  - echo yes | android update sdk --no-ui --all --filter platform-tools,tools
  - echo yes | android update sdk --no-ui --all --filter build-tools-29.0.3
  - echo yes | android update sdk --no-ui --all --filter android-29

script:
  - ./gradlew clean test


#sudo: false
#language: android
#dist: trusty
#android:
#  components:
#    - build-tools-29.0.3
#    - extra-google-google_play_services
#    - extra-google-m2repository
#    - extra-android-m2repository
#    - android-$ANDROID_EMULATOR_LEVEL
#    - sys-img-armeabi-v7a-google_apis-$ANDROID_EMULATOR_LEVEL
#env:
#  global:
#    - ANDROID_API_LEVEL=26
#    - ANDROID_EMULATOR_LEVEL=24
#    - ANDROID_BUILD_TOOLS_VERSION=26.0.1
#    - ANDROID_ABI=armeabi-v7a
#    - ANDROID_TAG=google_apis
#    - ADB_INSTALL_TIMEOUT=20
#before_install:
#  - chmod +x gradlew
#licenses:
#  - '.+'
#before_script:
#  - android list targets | grep -E '^id:' | awk -F '"' '{$1=""; print $2}'
#  - echo no | android create avd --force -n test -t "android-"$ANDROID_EMULATOR_LEVEL --abi $ANDROID_ABI --tag $ANDROID_TAG
#  - QEMU_AUDIO_DRV=none emulator -avd test -no-window &
#  - android-wait-for-emulator
#  - adb shell input keyevent 82 &